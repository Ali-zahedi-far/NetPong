# NetPong โ ูพุฑูฺูโ  (TCP) ุจุง Python + pygame

ุงู ูพุฑูฺู ฺฉ ุจุงุฒ ุฏูโููุฑูโ ุณุงุฏู ุดุจู ยซูพูฺฏโูพูฺฏ ฺูุงุฑุถูุนยป ุงุณุช ฺฉู:
- ูุนูุงุฑ **Client-Server** ุฏุงุฑุฏ (ุณุฑูุฑ ูุฑุฌุน ูุฒฺฉ ู ุงูุชุงุฒุฏู ุงุณุช).
- ุงุฒ **TCP sockets** ุจุฑุง ุชุจุงุฏู ุฏุงุฏูโูุง (JSON line-based) ุงุณุชูุงุฏู ูโฺฉูุฏ.
- ฺฏุฑุงูฺฉ ุจุง **pygame** ุฑุณู ูโุดูุฏ.
- ุชูุธูุงุช ูพุด ุงุฒ ุดุฑูุน ุจุงุฒ ุจุง **Tkinter** ุงูุฌุงู ูโุดูุฏ (ููุด ุจุงุฒฺฉูุ IP/Portุ ุชุนุฏุงุฏ ุชููพุ ุงูุชุงุฒ ูุฏูุ ุฒูุงู ุจุงุฒ).

> ูฺฉุชู: ุชูุงู ููุทู ุจุฑุฎูุฑุฏุ ุงูุชุงุฒุฏูุ ููฺฏุงูโุณุงุฒุ ุญููู ุจุงุฒ ู ูพุฑุฏุงุฒุด ููโุฒูุงู (threading) ุทุจู ุฎูุงุณุชู ูพุฑูฺู ูพุงุฏูโุณุงุฒ ุดุฏู ุงุณุช.  
> ุจุฑุง **ุงูุชุงุฒ ุงุถุงูู** (๐) ูุฒ ูุณุชูุฏุณุงุฒ ฺฉุงูู ููู ูุงู ู ูุฑู ุชูุธูุงุช ฺฏุฑุงูฺฉ ุงุฑุงุฆู ุดุฏู ุงุณุช.

---

## ูุญูู ุงุฌุฑุง

1) ูพุดโูุงุฒูุง ุฑุง ูุตุจ ฺฉูุฏ:
```bash
pip install -r requirements.txt
```

2) ุจุงุฒ ุฑุง ุงุฌุฑุง ฺฉูุฏ:
```bash
python run.py
```
ูพุณ ุงุฒ ุงุฌุฑุงุ ูุฑู ุชูุธูุงุช ุจุงุฒ ูโุดูุฏ. ฺฉ ุงุฒ ุณุณุชูโูุง ููุด **Host (Server + Player A)** ุฑุง ูโฺฏุฑุฏ ู ุณุณุชู ุฏฺฏุฑ **Client (Player B)**.  
- **Host** ููุท ูพูุฑุช ุฑุง ุชุนู ูโฺฉูุฏ (ูพุดโูุฑุถ: `50007`) ู ุชุนุฏุงุฏ ุชููพ/ุงูุชุงุฒ/ุฒูุงู ุฑุง ุงูุชุฎุงุจ ูโฺฉูุฏ.  
- **Client** ุจุงุฏ **IP** ุณุณุชู Host ู ููุงู **Port** ุฑุง ูุงุฑุฏ ฺฉูุฏ.

> ุงฺฏุฑ ูุฑ ุฏู ููุฑ ุฑู ฺฉ ุณุณุชู ุจุฑุง ุชุณุช ุงุฌุฑุง ฺฉูุฏุ ุฏุฑ ุญุงูุช Client ุขุฏุฑุณ IP ุฑุง `127.0.0.1` ุจฺฏุฐุงุฑุฏ.

---

## ฺฉูุชุฑูโูุง (ฺฉูุฏูุง)

- **ุจุงุฒฺฉู A (Host)** โ ุฏู ูพุฏู ุฑู ุงุถูุงุน **ุจุงูุง** (ุญุฑฺฉุช ุงูู) ู **ุฑุงุณุช** (ุญุฑฺฉุช ุนููุฏ):
  - ูพุฏู ุจุงูุง: `A` ู `D`
  - ูพุฏู ุฑุงุณุช: `W` ู `S`

- **ุจุงุฒฺฉู B (Client)** โ ุฏู ูพุฏู ุฑู ุงุถูุงุน **ูพุงู** (ุญุฑฺฉุช ุงูู) ู **ฺูพ** (ุญุฑฺฉุช ุนููุฏ):
  - ูพุฏู ูพุงู: `Left` ู `Right`
  - ูพุฏู ฺูพ: `Up` ู `Down`

ฺฉูุฏูุง ุนููู:
- `P` = ุชููู/ุงุฏุงูู ุจุงุฒ (Pause/Resume) โ ููุท ุชูุณุท Host ูุงุจู ุงุนูุงู ุงุณุช.
- `ESC` ุง ุจุณุชู ูพูุฌุฑู = ุฎุฑูุฌ.

---

## ููุงูู ุจุงุฒ ู ุงูุชุงุฒุฏู

- ุฒูู ุจุงุฒ ูุฑุจุน 600ร600 ูพฺฉุณู ุงุณุช.
- ูุฑ ุจุงุฒฺฉู ุฏู ุถูุน ูุฌุงูุฑ ุฑุง ุฏุฑ ุงุฎุชุงุฑ ุฏุงุฑุฏ:
  - A: ุจุงูุง ู ุฑุงุณุช
  - B: ูพุงู ู ฺูพ
- ุชููพโูุง ุงุฒ ูุฑฺฉุฒ ุจุง ุฌูุช ุชุตุงุฏู ุดุฑูุน ูโุดููุฏ. ุชุนุฏุงุฏ ุชููพโูุง ฑ ุง ฒ (ูุงุจู ุงูุชุฎุงุจ ุฏุฑ ุชูุธูุงุช).
- ุงฺฏุฑ ุชููพ ุจู **ุถูุน** ูุชุนูู ุจู ฺฉ ุจุงุฒฺฉู ุจุฑุฎูุฑุฏ ฺฉูุฏ ู **ูพุฏู ููุงู ุถูุน** ุขู ููุทู ุฑุง **ููพูุดุงูุฏู ุจุงุดุฏ**:
  - ุจุฑุง ุตุงุญุจ ุขู ุถูุน **ฑ ุงูุชุงุฒ ููู** ุซุจุช ูโุดูุฏ.
  - ุจุฑุง ุญุฑู **ฑ ุงูุชุงุฒ ูุซุจุช** ุซุจุช ูโุดูุฏ.
  - ุชููพ ุจู ูุฑฺฉุฒ ุฑุณุช ูโุดูุฏ (ุจุง ุฌูุช ุชุตุงุฏู ุฌุฏุฏ).
- ูพุงุงู ุจุงุฒ: ุฑุณุฏู ฺฉ ุงุฒ ุจุงุฒฺฉูุงู ุจู ุงูุชุงุฒ ูุฏู ุง ุงุชูุงู ุฒูุงู (ุงฺฏุฑ ุฒูุงู>ฐ ุชุนู ุดุฏู ุจุงุดุฏ).

---

## ูุนูุงุฑ ุดุจฺฉู ู ููฺฏุงูโุณุงุฒ

- **ุณุฑูุฑ (Host)** ูุงูฺฉ ุดุจูโุณุงุฒ ุงุณุช: ูุฒฺฉุ ุจุฑุฎูุฑุฏุ ุงูุชุงุฒุ ูพุงุงู ุจุงุฒ.
- ฺฉูุงูุชโูุง ุชููุง **ุฏุณุชูุฑ ูุฑูุฏ** (ุญุฑฺฉุช ูพุฏูโูุง) ุฑุง ุจุง ูุฑุฎ ุจุงูุง ุจุฑุง ุณุฑูุฑ ูโูุฑุณุชูุฏ.
- ุณุฑูุฑ ุฏุฑ ูุฑ ุชฺฉ ุจุงุฒุ ูุฑูุฏโูุง ุฑุง ุงุนูุงู ฺฉุฑุฏู ู **State** ุฑุง ุจุฑุง ูุฑ ุฏู ุทุฑู ูพุฎุด ูโฺฉูุฏ.
- ูุงูุจ ูพุงูโูุง **JSON** ู ูุฑููฺฏ ุจูโุตูุฑุช **ฺฉ JSON ุฏุฑ ูุฑ ุฎุท** ุงุณุช.

ุงููุงุน ูพุงูโูุง:
- `hello` (ุงุฒ ฺฉูุงูุช ุจู ุณุฑูุฑ): ุดุฑูุน ุงุชุตุงู + ูุนุฑู.
- `settings` (ุงุฒ ุณุฑูุฑ ุจู ููู): ุงุฑุณุงู ุชูุธูุงุช ุจุงุฒ.
- `start` (ุงุฒ ุณุฑูุฑ ุจู ููู): ุงุฑุณุงู ูุถุนุช ุงูููโ ูพุฏูโูุง/ุชููพโูุง/ุงูุชุงุฒ.
- `input` (ุงุฒ ุจุงุฒฺฉูุงู ุจู ุณุฑูุฑ): ูุถุนุช ูุฑูุฏ ูุญุธูโุง ูพุฏูโูุง.
- `state` (ุงุฒ ุณุฑูุฑ ุจู ููู): ุงุณููพโุดุงุช ูุถุนุช ูุนู (ุชููพโูุงุ ูพุฏูโูุงุ ุงูุชุงุฒุ ุฒูุงูุ ...).
- `game_over` (ุงุฒ ุณุฑูุฑ ุจู ููู): ูพุงุงู ุจุงุฒ + ุจุฑูุฏู.

> ุจุฑุง ุณุงุฏฺฏ ู ุงุทููุงูุ ุงุฒ **TCP** ุงุณุชูุงุฏู ุดุฏู ุงุณุช. ุฏุฑ ุตูุฑุช ูุงุฒ ูโุชูุงูุฏ ฺฉ ุดุงุฎู ุฌุฏุฏ ุจุฑุง **UDP** ุจุณุงุฒุฏ ู ุชููุง ูุงูโ ุงูุชูุงู ุฑุง ุชุบุฑ ุฏูุฏ.

---

## ุณุงุฎุชุงุฑ ูพุฑูฺู

```
netpong/
โโโ run.py                 # ููุทู ูุฑูุฏ: ูุฑู ุชูุธูุงุช (Tkinter) + ุงุฌุฑุง ุจุงุฒ
โโโ requirements.txt
โโโ README.md
โโโ game/
    โโโ common.py          # ุซุงุจุชโูุงุ ุฏุงุฏูโูุง ู ุงุจุฒุงุฑูุง ฺฉูฺฉ (JSON line, ูุฒฺฉ ูพุงู)
    โโโ server.py          # ุณุฑูุฑ ุจุงุฒ: ุดุจูโุณุงุฒ ู ูพุฎุด state
    โโโ client.py          # ฺฉูุงูุช: ุงุชุตุงูุ ุงุฑุณุงู inputุ ุฏุฑุงูุช state
    โโโ game.py            # ุญูููโ pygame (ุฑูุฏุฑุ ูุฑูุฏ ูุญูุ ูุตุฑู state ุดุจฺฉู)
```

---

## ุชูุถุญ ูพุงุฏูโุณุงุฒ โ ุตูุฑ ุชุง ุตุฏ (ุฎูุงุตูโ ุฎุทโุจูโุฎุท)

> ฺฉุฏูุง ุจุง ฺฉุงููุชโูุง ุฏูู ููุฑุงู ุดุฏูโุงูุฏ. ุฏุฑ ุงู ุจุฎุด ูุณุฑ ุงุฌุฑุง ู ููุงุท ฺฉูุฏ ุฑุง ุชูุตู ูโฺฉูู:

### 1) `run.py`
- ูุฑู Tkinter ูโุณุงุฒุฏ: ููุด ุจุงุฒฺฉู (Host/Client)ุ IP/Portุ ุชุนุฏุงุฏ ุชููพุ ุงูุชุงุฒ ูุฏูุ ุฒูุงู ุจุงุฒ.  
- ูพุณ ุงุฒ ูุดุฑุฏู Startุ ุจุฑุงุณุงุณ ููุด:
  - **Host**: ูููููโ Server ุฑุงูโุงูุฏุงุฒ ูโุดูุฏุ ุณูพุณ ุญูููโ `pygame` ุจุง ููุด A ุงุฌุฑุง ูโุดูุฏ.
  - **Client**: ุงุชุตุงู ุจู Host ู ุณูพุณ ุญูููโ `pygame` ุจุง ููุด B ุงุฌุฑุง ูโุดูุฏ.

### 2) `game/common.py`
- ุซุงุจุชโูุง (ุงุจุนุงุฏุ ุณุฑุนุชโูุงุ ุทูู ูพุฏูุ ...)ุ ฺฉูุงุณ ุฏุงุฏูโ ุณุงุฏู ุจุฑุง ุชููพ ู ุงุจุฒุงุฑูุง JSON line (`send_json_line`/`recv_json_lines`) ู ููู ููโุฒูุงู.  
- ุชูุงุจุน ููุฏุณูโ ุจุฑุฎูุฑุฏ ุจุง ุฏูุงุฑู/ูพุฏู ู ุฑุณุช ุชููพโูุง.

### 3) `game/server.py`
- ฺฉ ูุฎ (Thread) ุจุฑุง **ูุจูู ุงุชุตุงู** ฺฉูุงูุช ู ุณุงุฎุช ุณูฺฉุช ุงุฌุงุฏ ูโุดูุฏ.
- ูุฎ ุงุตู ุณุฑูุฑ: ุญูููโ ุชฺฉ ุจุงุฒ ุจุง ูุฑุฎ 60 FPS (ูฺฉุณโุชุงูโุงุณุชูพ ุจุง `time.perf_counter`).  
- ูุฑูุฏโูุง ุจุงุฒฺฉู A (ูุญู) ู ุจุงุฒฺฉู B (ุงุฒ ุดุจฺฉู) ุงุนูุงู ูโุดูุฏุ ูพุฏูโูุง Clamp ูโุดููุฏุ ุชููพโูุง ุญุฑฺฉุช ู ุจุฑุฎูุฑุฏ ูุญุงุณุจู ูโุดูุฏ.  
- ุฏุฑ ูุฑ ุชฺฉุ ฺฉ `state` ฺฉุงูู ุจุฑุง Host ู Client ุงุฑุณุงู ูโุดูุฏ.  
- ุฏุฑ ุฑุฎุฏุงุฏ ุงูุชุงุฒุ ุจุฑุฑุณ ูพุงุงู ุจุงุฒ ู ุงุฑุณุงู `game_over`.

### 4) `game/client.py`
- ุงุชุตุงู ุจู ุณุฑูุฑ ู ุงุฑุณุงู `hello`.  
- ูุฎ ุฏุฑุงูุช ูพุงูโูุง: `settings`, `start`, `state`, `game_over` ุฑุง ูโุฎูุงูุฏ ู **ุขุฎุฑู state** ุฑุง ุฏุฑ ูุชุบุฑ thread-safe ูฺฏู ูโุฏุงุฑุฏ.  
- ูุชุฏ ุจุฑุง ุงุฑุณุงู `input` ุจุฑ ุงุณุงุณ ฺฉูุฏูุง ูุดุฑุฏูโุดุฏูโ ฺฉุงุฑุจุฑ.

### 5) `game/game.py`
- ูพูุฌุฑูโ pygame ุฑุง ูโุณุงุฒุฏุ ูููุช/ุณุงุนุช ุจุงุฒ ุฑุง ุชูุธู ูโฺฉูุฏ.  
- ูฺฏุงุดุช ฺฉูุฏูุง ุจู ุญุฑฺฉุงุช ูพุฏูโูุง (ุจุฑุง Player A ู Player B) ุชุนุฑู ูโุดูุฏ.  
- ุฏุฑ ุญูููโ ุฑูุฏุฑ: ูุฑูุฏ ูุญู ุฎูุงูุฏู ูโุดูุฏุ ุจุฑุง ุณุฑูุฑ/ฺฉูุงูุช ุงุฑุณุงู ูโฺฏุฑุฏุฏุ state ุฑุณู ูโุดูุฏุ ูุชู Score/Time ููุงุด ุฏุงุฏู ูโุดูุฏ.  
- ุงฺฏุฑ `game_over` ุจุงุฏุ ุจูุฑ ุจุฑูุฏู ููุงุงู ุดุฏู ู ุจุง ูุดุงุฑ ESC ุฎุงุฑุฌ ูโุดูุฏ.

---

## ุงุฑุฒุงุจ ู ูพูุดุด ุดุงุฎุตโูุง

- ุณุงุฎุชุงุฑ ู ูุธู: ูพูุดูโุจูุฏุ ูุงูโฺฏุฐุงุฑ ูุนูุงุฏุงุฑุ ฺฉุงููุชโฺฏุฐุงุฑ ุฏูู โ
- ูุนูุงุฑ Client-Server: ุณุฑูุฑ ูุฑุฌุนุ ฺฉูุงูุช ุณุจฺฉ โ
- ูุฏุฑุช ุงุชุตุงู ุดุจฺฉู: TCPุ JSON lineุ ููุฏู ุฎุทุง ู ูุทุน ุงุชุตุงู โ
- ฺฉูุชุฑู ูพุฏู ุจุง ฺฉุจูุฑุฏ: ูฺฏุงุดุช ฺฉูุฏูุง ุจุฑุง ูุฑ ุฏู ุจุงุฒฺฉู โ
- ุฑูุฏุฑ ฺฏุฑุงูฺฉ: pygame ุจุง ุฒููุ ูพุฏูโูุงุ ุชููพโูุงุ ุงูุชุงุฒ โ
- ุญุฑฺฉุช ู ุจุฑุฎูุฑุฏ: ูุฒฺฉ ุณุงุฏูุ ุจุฑุฎูุฑุฏ ุจุง ูพุฏู/ุฏูุงุฑูุ ุฑุณุช ุชููพ โ
- ุณุณุชู ุงูุชุงุฒุฏู: ูุญุธูโุงุ ูพุงุงู ุจุงุฒ ุจุฑ ุงุณุงุณ ุงูุชุงุฒ/ุฒูุงู โ
- ููฺฏุงูโุณุงุฒ ุฏุงุฏู: ูพุฎุด state ุงุฒ ุณุฑูุฑุ ูุฑูุฏ ุงุฒ ฺฉูุงูุช โ
- ูพุฑุฏุงุฒุด ููโุฒูุงู: Thread ุฌุฏุง ุจุฑุง ุดุจฺฉู ู ุดุจูโุณุงุฒ โ
- ูฺฺฏ ุงุถุงูู: ูุฑู ุชูุธูุงุช ฺฏุฑุงูฺฉ (Tkinter) + ูุณุชูุฏุณุงุฒ ฺฉุงูู โโ

---

## ูฺฉุงุช ุชูุณุนูโ ุจุดุชุฑ (Optional Ideas)

- ููุงุฌุฑุช state ุจู **UDP** ุจุฑุง ฺฉุงูุด ุชุงุฎุฑ (ุจูโููุฑุงู Ping/Pong ุง Sequence Number).  
- ูุดุฑุฏูโุณุงุฒ JSON ุจุง msgpack/CBOR ุง ฺฉุงูุด ููุฏูุง.  
- ุงููุดูโูุง ุฒุจุงุชุฑ (trail ุชููพุ ุงูฺฉุช ุจุฑุฎูุฑุฏุ ุตุฏุง).  
- ฺูุฏโููุฑูโ ุจุด ุงุฒ ุฏู ุจุงุฒฺฉู ุง ุญุงูุช ุชูุงุดุงฺ.
